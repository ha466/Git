<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy 19th Birthday, Mithu!</title>
    <!-- 1. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <!-- 3. Tone.js for music -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>

    <style>
        /* 4. Custom CSS */
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden; 
        }
        .cursive {
            font-family: 'Great+Vibes', cursive;
        }

        /* --- Heart Cursor Effect --- */
        .heart {
            position: absolute;
            pointer-events: none;
            opacity: 0;
            animation: fadeAndFloat 1.2s linear forwards;
            z-index: 9999;
        }
        .heart::before, .heart::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 12px;
            height: 20px;
            background-color: #f472b6; /* pink-400 */
            border-radius: 10px 10px 0 0;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
        }
        .heart::after {
            left: 0;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }
        @keyframes fadeAndFloat {
            0% { opacity: 1; transform: translateY(0) scale(0.5); }
            100% { opacity: 0; transform: translateY(-80px) scale(1.2); }
        }

        /* --- Page Load Animations --- */
        .load-animate {
            transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        /* State for animations */
        .fade-in-up { animation: fadeInUp 0.8s ease-out forwards; }
        .scale-in { animation: scaleIn 0.8s ease-out forwards; }

        /* --- NEW: Lovely Stuff Animations --- */
        @keyframes gentlePulse {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            }
            50% { 
                transform: scale(1.03); 
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
        }
        .pulse-animate {
            /* This animation is applied via JS after the intro */
            animation: gentlePulse 3s infinite cubic-bezier(0.4, 0, 0.6, 1);
        }

        @keyframes gentleWiggle {
            0% { transform: rotate(0); }
            25% { transform: rotate(-3deg); }
            50% { transform: rotate(0); }
            75% { transform: rotate(3deg); }
            100% { transform: rotate(0); }
        }
        .wiggle-animate {
             /* This animation is applied via JS after the intro */
            animation: gentleWiggle 1.5s infinite;
        }

        /* --- Modal Styling --- */
        .modal-overlay {
            position: fixed; inset: 0;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.3s ease-in-out;
            pointer-events: none; z-index: 50;
        }
        .modal-overlay.show { opacity: 1; pointer-events: auto; }
        .modal-content {
            background-color: #fff; padding: 2.5rem; border-radius: 1.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            width: 90%; max-width: 500px; max-height: 90vh;
            overflow-y: auto; position: relative;
            transform: scale(0.9); transition: transform 0.3s ease-in-out;
        }
        .modal-overlay.show .modal-content { transform: scale(1); }

        /* Gift card styling */
        .gift-card {
            background-color: #fff; border-radius: 1rem; padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.2s ease-in-out; cursor: pointer;
        }
        .gift-card:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .gift-card-icon {
            width: 48px; height: 48px;
            margin: 0 auto 1rem; stroke: #db2777; /* pink-600 */
        }

        /* --- Scratch-off Canvas Styling --- */
        #wishTextContainer {
            position: relative;
            user-select: none; /* Prevent text selection underneath */
        }
        #scratchCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: transparent; /* Canvas itself is clear */
            cursor: cell; /* Fun "scratching" cursor */
            z-index: 10;
        }

        /* --- Typewriter Cursor --- */
        .typewriter-text p {
            min-height: 1.5rem; 
        }
        .typewriter-text p.typing::after {
            content: '|';
            animation: blink 1s step-end infinite;
        }
        @keyframes blink {
            50% { opacity: 0; }
        }

        /* --- Confetti --- */
        .confetti-piece {
            position: absolute;
            width: 8px;
            height: 16px;
            background: #f472b6; /* pink */
            top: 50%;
            left: 50%;
            opacity: 0;
            animation: fallAndFade 3s linear forwards;
            z-index: 10000;
        }
        @keyframes fallAndFade {
            0% {
                opacity: 1;
                transform: translate(0, 0) rotateZ(0deg);
            }
            100% {
                opacity: 0;
                transform: translate(var(--x-end), 80vh) rotateZ(720deg);
            }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 overflow-hidden relative">

    <!-- Faded Background Image -->
    <div class="fixed inset-0 z-[-10]">
        <img 
            src="https://ha466.github.io/Git/Images/PXL_20251112_043336499.PORTRAIT.jpg" 
            alt="Background" 
            class="w-full h-full object-cover"
            onerror="this.src='https://placehold.co/1920x1080/fbcfe8/fbcfe8?text=%20'" 
        >
        <div class="absolute inset-0 bg-pink-100 opacity-90"></div>
    </div>


    <!-- Music Toggle Button -->
    <button id="musicToggle" class="absolute top-4 right-4 text-pink-600 bg-white p-3 rounded-full shadow-md transition transform hover:scale-110 z-30">
        <svg id="playIcon" class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
        <svg id="pauseIcon" class="h-6 w-6 hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
    </button>

    <!-- Main Content -->
    <div id="mainContent" class="text-center z-10">
        <!-- 
          UPDATED: Removed pulse-animate class. 
          It will be added by JavaScript after the intro. 
        -->
        <img 
            id="mainImage"
            src="https://ha466.github.io/Git/Images/PXL_20251112_043336499.PORTRAIT.jpg" 
            alt="Mithu" 
            class="w-48 h-48 rounded-full object-cover border-4 border-white shadow-xl mx-auto mb-6 opacity-0 load-animate"
            onerror="this.src='https://placehold.co/192x192/fbcfe8/9d174d?text=Mithu'"
        >

        <h1 id="mainTitle" class="cursive text-7xl md:text-8xl text-pink-600 mb-2 opacity-0 load-animate" style="text-shadow: 2px 2px 4px rgba(255,255,255,0.7);">
            Happy 19th Birthday, Mithu!
        </h1>
        
        <!-- UPDATED: New text and heart icon -->
        <p id="mainSubtitle" class="text-lg text-pink-700 mb-8 opacity-0 load-animate flex items-center justify-center gap-2">
            A special day for a special person...
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-pink-500" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />
            </svg>
        </p>

        <div id="mainButtonContainer" class="opacity-0 load-animate">
            <!-- 
              UPDATED: Removed wiggle-animate class. 
              It will be added by JavaScript.
            -->
            <button id="openGiftsButton" class="bg-white p-5 rounded-lg shadow-xl transition transform hover:scale-105 hover:shadow-2xl focus:outline-none">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#db2777" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 12v10H4V12"/><path d="M22 7H2v5h20V7z"/><path d="M12 22V7"/>
                    <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"/>
                    <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"/>
                </svg>
            </button>
            <p class="mt-2 text-pink-600 font-semibold">Click to open your gifts</p>
        </div>
    </div>

    <!-- 1. The "Gift Box" Modal -->
    <div id="giftsModal" class="modal-overlay">
        <div class="modal-content w-full max-w-2xl">
            <button class="modal-close-btn absolute top-4 right-4 text-gray-400 hover:text-gray-700 transition">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <h2 class="cursive text-5xl text-pink-600 mb-8 text-center">
                Choose a Gift...
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Gift 1: The Letter -->
                <div id="openLetterGift" class="gift-card">
                    <svg class="gift-card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                    <h3 class="text-xl font-semibold text-pink-700">A Heartfelt Letter</h3>
                    <p class="text-sm text-gray-500">Just for you</p>
                </div>
                <!-- Gift 2: A Wish -->
                <div id="openWishGift" class="gift-card">
                    <svg class="gift-card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                    <h3 class="text-xl font-semibold text-pink-700">A Birthday Wish</h3>
                    <p class="text-sm text-gray-500">Scratch to reveal</p>
                </div>
                <!-- Gift 3: A Promise -->
                <div id="openPromiseGift" class="gift-card">
                    <svg class="gift-card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                    <h3 class="text-xl font-semibold text-pink-700">A Little Promise</h3>
                    <p class="text-sm text-gray-500">A voucher from me</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 2. The Letter Modal -->
    <div id="letterModal" class="modal-overlay" style="z-index: 60;">
        <div class="modal-content">
            <button class="modal-close-btn absolute top-4 right-4 text-gray-400 hover:text-gray-700 transition z-20">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <h2 class="cursive text-5xl text-pink-600 mb-6">To my dearest Mithu,</h2>
            <div class="typewriter-text space-y-4 text-gray-700 text-base md:text-lg">
                <p data-text="Happy 19th Birthday!"></p>
                <p data-text="It's such a special day, and I hope it’s filled with all the love, laughter, and joy you deserve. It feels like just yesterday we were celebrating your 18th, and now you're stepping into another beautiful year of your life."></p>
                <p data-text="I wanted to take a moment to tell you how incredibly special you are. You have a way of lighting up every room you enter and bringing so much happiness to the people around you. Your kindness, your laugh, and your beautiful heart are just a few of the million things that make you, you."></p>
                <p data-text="As you celebrate 19, I wish for all your dreams to take flight. May this year be packed with amazing new adventures, wonderful memories, and countless moments that make you smile."></p>
                <p data-text="Never forget how amazing you are. Keep shining, Mithu."></p>
                <p data-text="With all my love," class="cursive text-4xl text-right text-pink-500 mt-8 pt-4"></p>
            </div>
            <button id="skipTypewriter" class="absolute bottom-6 left-6 text-xs text-gray-400 hover:text-gray-600 transition">
                » Skip
            </button>
        </div>
    </div>

    <!-- 3. The "Wish" Modal -->
    <div id="wishModal" class="modal-overlay" style="z-index: 60;">
        <div class="modal-content">
            <button class="modal-close-btn absolute top-4 right-4 text-gray-400 hover:text-gray-700 transition z-20">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <h2 class="cursive text-5xl text-pink-600 mb-6 text-center">A Birthday Wish...</h2>
            <div id="wishTextContainer" class="relative">
                <canvas id="scratchCanvas"></canvas>
                <div class="space-y-4 text-gray-700 text-base md:text-lg italic text-center p-4">
                    <p>"May your 19th year be a new adventure,</p>
                    <p>Filled with moments, bright and clear.</p>
                    <p>May you find joy in little things,</p>
                    <p>And chase your dreams, and spread your wings.</p>
                    <p>May it be everything you're hoping for,</p>
                    <p>And so, so much more."</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 4. The "Promise" Modal -->
    <div id="promiseModal" class="modal-overlay" style="z-index: 60;">
        <div class="modal-content">
            <button class="modal-close-btn absolute top-4 right-4 text-gray-400 hover:text-gray-700 transition">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <h2 class="cursive text-5xl text-pink-600 mb-6">A Little Promise</h2>
            <div class="space-y-4 text-gray-700 text-base md:text-lg">
                <div class="border-4 border-dashed border-pink-300 rounded-lg p-6 text-center">
                    <h3 class="text-2xl font-bold text-pink-700 mb-2">Birthday Voucher</h3>
                    <p class="text-lg">This coupon is good for:</p>
                    <p class="text-3xl font-semibold text-pink-600 my-4">
                        One Unforgettable Day Out!
                    </p>
                    <p class="text-gray-600">(Movie, dinner, ice cream... your choice!)</p>
                    <p class="text-sm text-gray-500 mt-6">Redeemable: Anytime you need a smile.<br>Expires: Never!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 5. All JavaScript Logic ---

        document.addEventListener('DOMContentLoaded', () => {

            // NEW: Flag to prevent auto-reopening the modal
            let hasModalBeenOpened = false;
            let autoOpenTimer; // To store the timer

            // --- Page Load Animations ---
            (function () {
                const image = document.getElementById('mainImage');
                const title = document.getElementById('mainTitle');
                const subtitle = document.getElementById('mainSubtitle');
                const buttonContainer = document.getElementById('mainButtonContainer');
                const giftButton = document.getElementById('openGiftsButton');

                setTimeout(() => {
                    image.classList.add('scale-in');
                    image.classList.remove('opacity-0');
                }, 200);
                setTimeout(() => {
                    title.classList.add('fade-in-up');
                    title.classList.remove('opacity-0');
                }, 400);
                setTimeout(() => {
                    subtitle.classList.add('fade-in-up');
                    subtitle.classList.remove('opacity-0');
                }, 600);
                setTimeout(() => {
                    buttonContainer.classList.add('fade-in-up');
                    buttonContainer.classList.remove('opacity-0');
                }, 800);

                // --- NEW: Add lovely animations after intro ---
                // Add pulse to image after it scales in (200ms + 800ms anim)
                setTimeout(() => {
                    image.classList.add('pulse-animate');
                }, 1000); 

                // Add wiggle to button after it fades in (800ms + 800ms anim)
                setTimeout(() => {
                    giftButton.classList.add('wiggle-animate');
                }, 1600);
            })();


            // --- Modal Control ---
            const modals = {
                gifts: document.getElementById('giftsModal'),
                letter: document.getElementById('letterModal'),
                wish: document.getElementById('wishModal'),
                promise: document.getElementById('promiseModal')
            };
            
            let isTypewriterActive = false;
            let typewriterTimer;
            let isScratchCardSetup = false;

            function toggleModal(modalId, show) {
                const modal = m
